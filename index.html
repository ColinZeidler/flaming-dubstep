<!DOCTYPE html>
<html>
	<head>
		<title>Placeholder</title>
		<link rel="stylesheet" type="text/css" href="main.css">
		
	</head>
	<script type="text/javascript">
		var systemName = '';
		var collabBaseHeight = ''; //the base height to return the collabs to
		function ready() {	//called after the page has loaded
			systemName = "";
			loadSysName();
			getStats(true);

		}
		function loadSysName() {	//called when the system is changed
			var element = document.getElementById("systemSelector");
			systemName = element.options[element.selectedIndex].value;
			document.title = systemName;
			loadSysInfo()
			getStats(false);
			getBuild();
		}
		function getStats(multi) {	//used to get call stats for the stats div
			var xmlhttp=new XMLHttpRequest();
			
			xmlhttp.onreadystatechange=function() {
				if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
					document.getElementById("statsContent").innerHTML = xmlhttp.responseText;
					if (multi) {
						setTimeout('getStats(true)', 2000);
					}
				}
			}
			xmlhttp.open('GET', 'stats.php?system='+systemName);
			xmlhttp.send();
		}
		function getBuild() {
			var xmlhttp=new XMLHttpRequest();

			xmlhttp.onreadystatechange=function() {
				if (xmlhttp.readyState == 4 && xmlhttp.status ==200) {
				document.getElementById("buildInfo").innerHTML = xmlhttp.responseText;
				}
			}
			xmlhttp.open('GET', 'getBuild.php?system='+systemName);
			xmlhttp.send();
		}
		function sysDropDown() {
			var tab=document.getElementById('sysDropDown');
			if (tab.clientHeight == 20) {
				tab.style.height =  "150px";
				
				tab.style.width = "320px";
			} else {
				tab.style.height = "20px";
				tab.style.width =  "90px";
			}
		}
		function loadSysInfo() {
			var xmlhttp=new XMLHttpRequest();

			xmlhttp.onreadystatechange=function() {
				if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
					document.getElementById('systemInfo').innerHTML =  xmlhttp.responseText;
				}
			}
			xmlhttp.open('GET', 'getInfo.php?system='+systemName);
			xmlhttp.send();
			document.getElementById('systemInfo').innerHTML = "<img src=\"images/Loading.gif\" width=\"320\" height=\"20\"/>";
		}
		function resize() {
			var stats = document.getElementById('stats');
			var img = document.getElementById('statButton');
			if (img.innerHTML.indexOf("expand") !== -1) {
				//expand div, and change image
				stats.style.left = "10px";
				img.innerHTML = "<img src=images/shrink.png width=36 />";
			} else {
				// shrink div and change image
				stats.style.left = "435px";
				img.innerHTML = "<img src=images/expand.png width=36 />";
			}
		}
	</script>

	<body onload='ready()'>
		<form>
			<select id="systemSelector" onchange='loadSysName()'>
				<option value="Avocado">Avocado</option>
				<option value="Banana">Banana</option>
				<option value="Coconut">Coconut</option>
				<option value="Duku">Duku</option>
				<option value="Emblic">Emblic</option>
				<option value="Fig">Fig</option>
				<option value="Galia">Galia</option>
				<option value="Honeydew">Honeydew</option>
				<option value="Imbe">Imbe</option>
				<option value="Jalapeno">Jalapeno</option>
				<option value="Kiwi">Kiwi</option>
				<option value="Loganberry">Loganberry</option>
				<option value="Newton">Newton</option>
				<option value="Papaya">Papaya</option>
			</select>
		</form>
		<div id="stats"><h2>System Stats</h2>
			<div id=statButton onclick='resize()'><img src=images/shrink.png  width=36 /></div>
			<div id="buildInfo">Build data</div>
			<div id=statsContent>
			<h3>Incoming Video</h3>
			<p>
				<div id=SysStat><b>a stat grouping</b>
					<div id=stat> a single stat</div>
				</div>
				<div id=SysStat><b>a stat grouping</b>
					<div id=stat> a single stat</div>
					<div id=stat> a single stat</div>
					<div id=stat> a single stat</div>
				</div>
				<div id=SysStat><b>a stat grouping</b>
					<div id=stat> a single stat</div>
					<div id=stat><b>a single</b>
					<table>
					  <tr>
					    <th>Source</th>
					    <th>Local</th>
					  </tr>
					    <td>FPS</td>
					    <td>FPS</td>
					  <tr>
					    <td>size</td>
					  </tr>
					  <tr>
					    <td>kbps</td>
					  </tr>
					</table>
					</div>
				</div>
			</p>
			<h3>Outgoing Video</h3>
			<p>
				<div id=SysStat><b>System Name</b>
					<div id=stat>outgoing stat</div>
				</div>
			</p>
			</div>
		</div>
		<div id=sysDropDown onclick='sysDropDown()'>
			<b>System Info</b>
			<div id=systemInfo>
			</div>
			Close this
		</div>
	</body>

</html>
